<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Lesson 7 Application Project</title>

  <script language="javascript">
    <!--
    function validate(form) {

      /* Visa card begins with "4" and has 16 digits.
         MasterCard begins with "5" and has 16 digits.
         American Express card begins with "3" and has 15 digits. */

      var visaEXP = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;
      var mcEXP = /^(?:5[1-5][0-9]{14})$/;
      var amxEXP = /^(?:3[47][0-9]{13})$/;

      // Month verification
      var veri = new Date();
      var selemo = form.expMo.value;
      var thismo = veri.getMonth();

      var len = form.ccard.length;

      for (var i = 0; i < len; i++) {

        if (selemo < thismo) {
          alert("Card expired");
          return;
        }

        if (form.ccard[i].checked) {

          if (form.ccard[i].value == "visa") {
            if (form.number.value.match(visaEXP)) {
              alert("You have entered a valid VISA card number.");
              var checked = 1;
              return;
            } else {
              alert("This is not a VISA card number. Please check your card and try again.");
            }
          }

          if (form.ccard[i].value == "mc") {
            if (form.number.value.match(mcEXP)) {
              alert("You have entered a valid MasterCard card number.");
              return;
              //var checked = 1;
            } else {
              alert("This is not a MasterCard card number. Please check your card and try again.");
            }
          }

          if (form.ccard[i].value == "amex") {
            if (form.number.value.match(amxEXP)) {
              alert("You have entered a valid American Express card number.");
              return;
              //var checked = 1;
            } else {
              alert("This is not an American Express card number. Please check your card and try again.");
            }
          }

        }

      }

    }




    //
    -->
  </script>

</head>

<body>

  <h3>CIW JavaScript Specialist</h3>
  <hr />
  <form name="ccForm">
    <p>
      <input type="radio" name="ccard" value="visa" />
      Visa
    </p>
    <p>
      <input type="radio" name="ccard" value="mc" />
      MasterCard
    </p>
    <p>
      <input type="radio" name="ccard" value="amex" />
      American Express
    </p>
    <p>
      Card #
      <input type="text" name="number" />
    </p>
    <p>
      Exp Date:
      <select name="expMo">
        <option value=0>Jan
        <option value=1>Feb
        <option value=2>Mar
        <option value=3>Apr
        <option value=4>May
        <option value=5>Jun
        <option value=6>Jul
        <option value=7>Aug
        <option value=8>Sep
        <option value=9>Oct
        <option value=10>Nov
        <option value=11>Dec
      </select>
      <select name="expYr">
        <option value=2020>2020
        <option value=2021>2021
        <option value=2022>2022
        <option value=2023>2023
        <option value=2024>2024
        <option value=2025>2025
        <option value=2026>2026
        <option value=2027>2027
      </select>
    </p>

    <input type="button" value="Check Form" onClick="validate(this.form);" />
    <input type="reset" value="Reset Form" />
  </form>

</body>

</html>
